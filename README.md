# CS2死后全自动狡辩工具

> 在CS2中死亡后自动发送客观分析战败原因的工具  
> (支持两种工作模式：GSI聊天模式和CFG按键模式)

_该README由DeepSeek生成_

## 主要特性

1. **两种工作模式**：
   - **GSI聊天模式**：自动检测死亡事件并发送消息
   - **CFG按键模式**：生成游戏配置文件，通过按键随机发送消息

2. **丰富的配置选项**：
   - 自定义死亡消息库
   - 聊天键绑定（全局/队友/自定义）
   - 按键延迟调整
   - 窗口检测开关
   - 消息发送重试机制


## 安装与使用

1. **首次运行**：
   ```bash
   ImLag.exe
   ```
- 自动生成配置文件：`Config.json` 和 `Messages.json`
- 按提示完成初始设置

2. **基本使用**：
   ```bash
   ImLag.exe
   ```
    - 以管理员身份运行（解决权限问题）
    - 进入CS2游戏
    - 死亡后自动发送随机消息

## 配置说明

### 主要配置文件

1. `Config.json` - 程序行为设置：
   ```json
   {
     "ChatKey": "y",              // 聊天按键 (y=全局, u=队友, enter=回车)
     "UserPlayerName": "Eicy",     // 玩家名 (用于GSI模式)
     "OnlySelfDeath": true,        // 仅监听自己死亡
     "SkipWindowCheck": false,     // 跳过窗口检测
     "ForceMode": false,           // 强制发送模式
     "KeyDelay": 100,              // 按键延迟(毫秒)
     "UseCfgMode": false,          // 使用CFG模式
     "TotalCfgFiles": 5,           // CFG文件数量
     "BindKeys": ["k", "p", "l"],  // CFG绑定键
     "CS2Path": "C:\\..."          // CS2安装路径
   }
   ```

2. `Messages.json` - 死亡消息库：
   ```json
   [
     "网卡",
     "手抖",
     "高延迟",
     "鼠标出问题了",
     "被阴了",
     "卡输入法了"
   ]
   ```

## 控制台操作指南

程序启动后显示操作菜单：

```
=== ImLag - 当前配置 & 可用操作 ===

**当前模式: 聊天模式 (GSI)**
  描述: 通过 GSI 自动检测死亡并发送消息。

配置信息:
  聊天按键: y (全局聊天)
  监听模式: 仅监听自己死亡 (玩家名: Eicy)
  窗口检测: 已启用
  强制发送: 已禁用
  按键延迟: 100 毫秒
  模拟方式: InputSimulator

聊天模式控制按键:
  T  - 切换到 CFG 模式
  A  - 添加新消息
  D  - 删除消息
  L  - 显示当前消息列表
  C  - 更改聊天按键设置
  P  - 更新玩家名
  M  - 切换监听模式
  W  - 切换窗口检测
  F  - 切换强制发送模式
  K  - 调整按键延迟
  I  - 切换按键模拟方式

通用控制按键:
  V  - 显示版本信息
  ESC - 退出程序
========================================
请按键选择操作: 
```

## 模式详解

### 1. GSI聊天模式

- **工作原理**：
    1. 通过CS2 GSI监听游戏事件
    2. 检测到玩家死亡时自动发送随机消息
    3. 使用Windows API模拟按键输入

- **优势**：
    - 完全自动化，死亡双手离开键盘立刻发送
    - 可以选择全局/队内发送
    - 无需游戏配置

### 2. CFG按键模式

- **工作原理**：
    1. 生成一组游戏配置文件(`imlag_say_*.cfg`)
    2. 修改`autoexec.cfg`绑定按键
    3. 游戏内按键触发随机消息

- **优势**：
    - 不污染剪贴板

- **使用流程**：
    1. 切换到CFG模式 (按`T`)
    2. 设置CS2路径 (按`S` 一般情况下自动设置好了)
    3. 生成CFG文件 (按`G`)
    4. 进入游戏按键发送消息

## 注意事项

1. **管理员权限**：
   ```bash
   右键ImLag.exe -> 以管理员身份运行
   ```
    - 需要系统权限模拟按键操作
    - 非管理员运行时可能会出错

4. **自定义消息**：
    - 修改`Messages.json`添加客观分析战败原因
    - 控制台中按`A`即时添加新消息

5. **模式选择建议**：
    - 追求稳定 → 选择CFG模式
    - 追求自动化 → 选择GSI模式

![队友评价.jpg](https://s2.loli.net/2025/06/07/j8s2PcZroRWDlpS.jpg)

## 相关开源仓库

- 游戏状态集成: https://github.com/antonpup/CounterStrike2GSI
- 剪贴板操作: https://github.com/CopyText/TextCopy
- 输入模拟: https://www.nuget.org/packages/InputSimulatorCore
```